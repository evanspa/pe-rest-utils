<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>pe-rest-utils.core documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Pe-rest-utils 0.0.6 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pe-rest-utils</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>changelog</span></div></div></li><li class="depth-3 branch"><a href="pe-rest-utils.changelog.meta.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>meta</span></div></a></li><li class="depth-3 branch"><a href="pe-rest-utils.changelog.resource-support.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>resource-support</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>version</span></div></div></li><li class="depth-4"><a href="pe-rest-utils.changelog.version.resource-support-v001.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>resource-support-v001</span></div></a></li><li class="depth-2 branch current"><a href="pe-rest-utils.core.html"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="pe-rest-utils.macros.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>macros</span></div></a></li><li class="depth-2"><a href="pe-rest-utils.meta.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>meta</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="pe-rest-utils.core.html#var-assoc-err-mask"><div class="inner"><span>assoc-err-mask</span></div></a></li><li class="depth-1"><a href="pe-rest-utils.core.html#var-assoc-link"><div class="inner"><span>assoc-link</span></div></a></li><li class="depth-1"><a href="pe-rest-utils.core.html#var-content-type"><div class="inner"><span>content-type</span></div></a></li><li class="depth-1"><a href="pe-rest-utils.core.html#var-enumerate-media-types"><div class="inner"><span>enumerate-media-types</span></div></a></li><li class="depth-1"><a href="pe-rest-utils.core.html#var-get-invoker"><div class="inner"><span>get-invoker</span></div></a></li><li class="depth-1"><a href="pe-rest-utils.core.html#var-get-t"><div class="inner"><span>get-t</span></div></a></li><li class="depth-1"><a href="pe-rest-utils.core.html#var-handle-resp"><div class="inner"><span>handle-resp</span></div></a></li><li class="depth-1"><a href="pe-rest-utils.core.html#var-is-known-content-type.3F"><div class="inner"><span>is-known-content-type?</span></div></a></li><li class="depth-1"><a href="pe-rest-utils.core.html#var-known-content-type-predicate"><div class="inner"><span>known-content-type-predicate</span></div></a></li><li class="depth-1"><a href="pe-rest-utils.core.html#var-link-href"><div class="inner"><span>link-href</span></div></a></li><li class="depth-1"><a href="pe-rest-utils.core.html#var-make-abs-link"><div class="inner"><span>make-abs-link</span></div></a></li><li class="depth-1"><a href="pe-rest-utils.core.html#var-make-abs-link-href"><div class="inner"><span>make-abs-link-href</span></div></a></li><li class="depth-1"><a href="pe-rest-utils.core.html#var-media-type"><div class="inner"><span>media-type</span></div></a></li><li class="depth-1"><a href="pe-rest-utils.core.html#var-parse-auth-header"><div class="inner"><span>parse-auth-header</span></div></a></li><li class="depth-1"><a href="pe-rest-utils.core.html#var-parse-media-type"><div class="inner"><span>parse-media-type</span></div></a></li><li class="depth-1"><a href="pe-rest-utils.core.html#var-put-or-post-invoker"><div class="inner"><span>put-or-post-invoker</span></div></a></li><li class="depth-1"><a href="pe-rest-utils.core.html#var-put-or-post-t"><div class="inner"><span>put-or-post-t</span></div></a></li><li class="depth-1"><a href="pe-rest-utils.core.html#var-read-res"><div class="inner"><span>read-res</span></div></a></li><li class="depth-1"><a href="pe-rest-utils.core.html#var-write-res"><div class="inner"><span>write-res</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">pe-rest-utils.core</h2><div class="doc"><pre class="plaintext">A set of functions to simplify the development of (hypermedia) REST services
on top of Liberator.</pre></div><div class="public anchor" id="var-assoc-err-mask"><h3>assoc-err-mask</h3><div class="usage"><code>(assoc-err-mask ring-resp-map ctx ctx-keyword hdr-error-mask)</code></div><div class="doc"><pre class="plaintext">Associates hdr-error-mask as a response header in the Ring response map,
ring-resp-map.  The value used is entry found in ctx keyed on ctx-keyword.</pre></div><div class="src-link"><a href="https://github.com/evanspa/pe-rest-utils/blob/0.0.6/src/pe_rest_utils/core.clj#L25">view source</a></div></div><div class="public anchor" id="var-assoc-link"><h3>assoc-link</h3><div class="usage"><code>(assoc-link m [rel link-m])</code></div><div class="doc"><pre class="plaintext">Associates the link vector (as returned by make-abs-link) with m keyed on the
relation of the link vector (its first element).</pre></div><div class="src-link"><a href="https://github.com/evanspa/pe-rest-utils/blob/0.0.6/src/pe_rest_utils/core.clj#L61">view source</a></div></div><div class="public anchor" id="var-content-type"><h3>content-type</h3><div class="usage"><code>(content-type mt-type mt-subtype version format-ind charset-name)</code><code>(content-type mt-type mt-subtype version)</code></div><div class="doc"><pre class="plaintext">Returns a content type string of the form: type/subtype-vXXX;charset=XXX
</pre></div><div class="src-link"><a href="https://github.com/evanspa/pe-rest-utils/blob/0.0.6/src/pe_rest_utils/core.clj#L33">view source</a></div></div><div class="public anchor" id="var-enumerate-media-types"><h3>enumerate-media-types</h3><div class="usage"><code>(enumerate-media-types mts)</code></div><div class="doc"><pre class="plaintext">Returns a seq of HTTP-formated media type strings from the
&apos;supported-media-types&apos; var.</pre></div><div class="src-link"><a href="https://github.com/evanspa/pe-rest-utils/blob/0.0.6/src/pe_rest_utils/core.clj#L67">view source</a></div></div><div class="public anchor" id="var-get-invoker"><h3>get-invoker</h3><div class="usage"><code>(get-invoker ctx db-spec base-url entity-uri-prefix entity-uri embedded-resources-fn links-fn entids any-issues-bit body-data-out-transform-fn fetch-fn hdr-auth-token hdr-error-mask)</code></div><div class="doc"><pre class="plaintext">Convenience function for handling HTTP GET requests.
</pre></div><div class="src-link"><a href="https://github.com/evanspa/pe-rest-utils/blob/0.0.6/src/pe_rest_utils/core.clj#L268">view source</a></div></div><div class="public anchor" id="var-get-t"><h3>get-t</h3><div class="usage"><code>(get-t version accept-format-ind accept-charset accept-lang ctx db-spec base-url entity-uri-prefix entity-uri embedded-resources-fn links-fn entids any-issues-bit body-data-out-transform-fn fetch-fn hdr-auth-token hdr-error-mask)</code></div><div class="doc"><pre class="plaintext">Convenience function for handling HTTP GET requests.
</pre></div><div class="src-link"><a href="https://github.com/evanspa/pe-rest-utils/blob/0.0.6/src/pe_rest_utils/core.clj#L474">view source</a></div></div><div class="public anchor" id="var-handle-resp"><h3>handle-resp</h3><div class="usage"><code>(handle-resp ctx hdr-auth-token hdr-error-mask)</code></div><div class="doc"><pre class="plaintext">Returns a Ring response based on the content of the Liberator context.
hdr-auth-token and hdr-error-mark are the names of the authentication token
and error mask response headers.</pre></div><div class="src-link"><a href="https://github.com/evanspa/pe-rest-utils/blob/0.0.6/src/pe_rest_utils/core.clj#L556">view source</a></div></div><div class="public anchor" id="var-is-known-content-type.3F"><h3>is-known-content-type?</h3><div class="usage"><code>(is-known-content-type? ctx mts charsets)</code></div><div class="doc"><pre class="plaintext">Returns a vector of 2 elements; the first indicates if the content-type
of the entity of the request is known by this REST API, and the second
element is the parsed character set of the entity string representation.
If the content-type is not supported, then the second element will be
nil.</pre></div><div class="src-link"><a href="https://github.com/evanspa/pe-rest-utils/blob/0.0.6/src/pe_rest_utils/core.clj#L99">view source</a></div></div><div class="public anchor" id="var-known-content-type-predicate"><h3>known-content-type-predicate</h3><div class="usage"><code>(known-content-type-predicate supported-media-types)</code></div><div class="doc"><pre class="plaintext">Returns a function suitable to be used for the :known-content-type? slot of a
Liberator resource.</pre></div><div class="src-link"><a href="https://github.com/evanspa/pe-rest-utils/blob/0.0.6/src/pe_rest_utils/core.clj#L140">view source</a></div></div><div class="public anchor" id="var-link-href"><h3>link-href</h3><div class="usage"><code>(link-href [_ {href :href}])</code></div><div class="doc"><pre class="plaintext">Returns the absolute URL string part of a link vector (as returned by
make-abs-link).</pre></div><div class="src-link"><a href="https://github.com/evanspa/pe-rest-utils/blob/0.0.6/src/pe_rest_utils/core.clj#L55">view source</a></div></div><div class="public anchor" id="var-make-abs-link"><h3>make-abs-link</h3><div class="usage"><code>(make-abs-link version rel mt-subtype base-url abs-path)</code></div><div class="doc"><pre class="plaintext">Returns a vector where the first element is rel, and the second element is
map with keys :href and :type.  The value at :href is the absolute URL
constructed from base-url and abs-path, and :type is a media type string
constructed from pe-rest-utils.meta/mt-type and mt-subtype.</pre></div><div class="src-link"><a href="https://github.com/evanspa/pe-rest-utils/blob/0.0.6/src/pe_rest_utils/core.clj#L46">view source</a></div></div><div class="public anchor" id="var-make-abs-link-href"><h3>make-abs-link-href</h3><div class="usage"><code>(make-abs-link-href base-url abs-path)</code></div><div class="doc"><pre class="plaintext">Returns an absolute URL string from base-url and abs-path.
</pre></div><div class="src-link"><a href="https://github.com/evanspa/pe-rest-utils/blob/0.0.6/src/pe_rest_utils/core.clj#L41">view source</a></div></div><div class="public anchor" id="var-media-type"><h3>media-type</h3><div class="usage"><code>(media-type mt-type mt-subtype version format-ind)</code></div><div class="doc"><pre class="plaintext">Returns a media type string constructed from the given arguments.
</pre></div><div class="src-link"><a href="https://github.com/evanspa/pe-rest-utils/blob/0.0.6/src/pe_rest_utils/core.clj#L114">view source</a></div></div><div class="public anchor" id="var-parse-auth-header"><h3>parse-auth-header</h3><div class="usage"><code>(parse-auth-header authorization scheme scheme-param-name)</code></div><div class="doc"><pre class="plaintext">Parses an HTTP &apos;Authorization&apos; header returning a vector containing the
parsed authorization scheme , scheme parameter name and parameter value.</pre></div><div class="src-link"><a href="https://github.com/evanspa/pe-rest-utils/blob/0.0.6/src/pe_rest_utils/core.clj#L119">view source</a></div></div><div class="public anchor" id="var-parse-media-type"><h3>parse-media-type</h3><div class="usage"><code>(parse-media-type media-type)</code></div><div class="doc"><pre class="plaintext">Parses a stylized media type returning a map of 5 entries:
:type
:subtype
:bare-mediatype (concatenation of type and subtype with &apos;/&apos; in-between)
:version
:format-ind
:charset</pre></div><div class="src-link"><a href="https://github.com/evanspa/pe-rest-utils/blob/0.0.6/src/pe_rest_utils/core.clj#L78">view source</a></div></div><div class="public anchor" id="var-put-or-post-invoker"><h3>put-or-post-invoker</h3><div class="usage"><code>(put-or-post-invoker ctx method db-spec base-url entity-uri-prefix entity-uri embedded-resources-fn links-fn entids validator-fn any-issues-bit body-data-in-transform-fn body-data-out-transform-fn existing-entity-fns saveentity-entity-already-exists-bit next-entity-id-fn save-new-entity-fn save-entity-fn hdr-establish-session &amp; more)</code></div><div class="doc"><pre class="plaintext">Convenience function for handling HTTP PUT or POST methods.  Within the
context of POST, 3 &apos;types&apos; of POST are supported: (1) POST-as-create, (2)
POST-as-create Async, (3) POST-as-do.  The &apos;POST-as-create&apos; types are your
typically resource-creation types.  The former would return a 201 in a success
scenario, the latter would return a 202.  The 3rd type, POST-as-do, is for
those non-creation use cases that don&apos;t reasonably fit well within a different
HTTP method.  You might use &apos;POST-as-do&apos; for performing a login action.</pre></div><div class="src-link"><a href="https://github.com/evanspa/pe-rest-utils/blob/0.0.6/src/pe_rest_utils/core.clj#L192">view source</a></div></div><div class="public anchor" id="var-put-or-post-t"><h3>put-or-post-t</h3><div class="usage"><code>(put-or-post-t version body-data accept-format-ind accept-charset accept-lang ctx method db-spec base-url entity-uri-prefix entity-uri embedded-resources-fn links-fn entids validator-fn any-issues-bit body-data-in-transform-fn body-data-out-transform-fn existing-entity-fns &amp; more)</code></div><div class="doc"><pre class="plaintext">Convenience function for handling HTTP PUT or POST methods.  Within the
context of POST, 3 &apos;types&apos; of POST are supported: (1) POST-as-create, (2)
POST-as-create Async, (3) POST-as-do.  The &apos;POST-as-create&apos; types are your
typically resource-creation types.  The former would return a 201 in a success
scenario, the latter would return a 202.  The 3rd type, POST-as-do, is for
those non-creation use cases that don&apos;t reasonably fit well within a different
HTTP method.  You might use &apos;POST-as-do&apos; for performing a login action.</pre></div><div class="src-link"><a href="https://github.com/evanspa/pe-rest-utils/blob/0.0.6/src/pe_rest_utils/core.clj#L312">view source</a></div></div><div class="public anchor" id="var-read-res"><h3>read-res</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><pre class="plaintext">Returns an object by parsing content based on pct (parsed content type) and
charset.</pre></div><div class="src-link"><a href="https://github.com/evanspa/pe-rest-utils/blob/0.0.6/src/pe_rest_utils/core.clj#L157">view source</a></div></div><div class="public anchor" id="var-write-res"><h3>write-res</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><pre class="plaintext">Returns a string reprsentation of res based on format-ind (format indicator)
and charset.</pre></div><div class="src-link"><a href="https://github.com/evanspa/pe-rest-utils/blob/0.0.6/src/pe_rest_utils/core.clj#L163">view source</a></div></div></div></body></html>